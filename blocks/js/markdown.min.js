function text_md_onchange(){document.getElementById("result").innerHTML=markdownToHtml(document.getElementById("text_md").value)}function markdownToHtml(e){_mdRuntime.TitleIdCount=0;let t=e.split(/\n/gm);var n=void 0,i=void 0,l=void 0;for(let e=0;e<t.length;e++)t[e]=t[e].replace(/\r/g,""),l=e<t.length-1?t[e+1].replace(/\r/g,""):void 0,i=n,n=t[e],t[e]=_dispatcher(i,t[e],l);let c="";for(let e=0;e<t.length;e++){const n=t[e];c+=n}return c}function _dispatcher(e,t,n){let i={latexblock:!1,inlinelatex:!1,codeblock:!1,inlinecode:!1,paragraph:!1,splitLine:!1,title:!1,bold:!1,italic:!1,paragraph:!1,alias:!1,list:!1,blockquote:!1,link:!1,img:!1,maintext:!1};return i.latexblock=_isLaTexBlock(t),i.latexblock?_convertLaTexBlock(t):_mdRuntime.InLaTexBlock?t+"\n":(i.codeblock=_isCodeBlock(t),i.codeblock?_convertCodeBlock(t):_mdRuntime.InCodeBlock?(t=t.replace(/\</g,"&lt;"),t=t.replace(/\>/g,"&gt;"),t+"\n"):(i.paragraph=_isParagraph(t),i.paragraph?_convertParagraph(t):(i.splitLine=_isSplitLine(t),i.splitLine?_convertSplitLine(t):(i.inlinelatex=_isInlineLaTex(t),i.inlinelatex&&(t=_convertInlineLaTex(t)),i.inlinecode=_isInlineCode(t),i.inlinecode&&(t=_convertInlineCode(t)),i.alias=_isAlias(t),i.alias&&(t=_convertAlias_first(t)),i.blockquote=_isQuote(t),i.blockquote&&(t=_convertQoute(e,t,n)),i.title=_isContainTitle(t),i.title&&(t=_convertTitle(t)),i.bold=_isBold(t),i.bold&&(t=_convertBold(t)),i.italic=_isItalic(t),i.italic&&(t=_convertItalic(t)),i.list=_isList(t),i.list&&(t=_convertList(e,t,n)),i.img=_isImg(t),i.img&&(t=_convertImg(t)),i.link=_isLink(t),i.link&&(t=_convertLink(t)),i.alias&&(t=_convertAlias_second(t)),i.maintext=_isMainText(i),i.maintext&&(t=_convertMainText(t)),t))))}function _isParagraph(e){return!(e.search(/\S/g)>=0)}function _convertParagraph(e){return"<br>"}function _isContainTitle(e){let t=e.search(/^(#{1,6})\s.*/i);return t>=0}function _convertTitle(e){return e.search(/^(#{1})\s.*/)>=0?`<h1 id='md_title_${_mdRuntime.TitleIdCount++}'>${e.substr(2,e.length-2)}</h1>`:e.search(/^(#{2})\s.*/)>=0?`<h2 id='md_title_${_mdRuntime.TitleIdCount++}'>${e.substr(3,e.length-3)}</h2>`:e.search(/^(#{3})\s.*/)>=0?`<h3 id='md_title_${_mdRuntime.TitleIdCount++}'>${e.substr(4,e.length-4)}</h3>`:e.search(/^(#{4})\s.*/)>=0?`<h4 id='md_title_${_mdRuntime.TitleIdCount++}'>${e.substr(5,e.length-5)}</h4>`:e.search(/^(#{5})\s.*/)>=0?`<h5 id='md_title_${_mdRuntime.TitleIdCount++}'>${e.substr(6,e.length-6)}</h5>`:e.search(/^(#{6})\s.*/)>=0?`<h6 id='md_title_${_mdRuntime.TitleIdCount++}'>${e.substr(7,e.length-7)}</h6>`:"<p>Markdown convert error: on function _convertTitle(line)</p>"}function _isBold(e){return e.search(/\*\*.+?\*\*/g)>=0}function _convertBold(e){var t=e.match(/\*\*.+?\*\*/g);for(let i=0;i<t.length;i++){const l=t[i];var n=`<strong>${l.slice(2,-2)}</strong>`;e=e.replace(/\*\*.+?\*\*/,n)}return e}function _isItalic(e){return e.search(/\*.+?\*/g)>=0}function _convertItalic(e){var t=e.match(/\*.+?\*/g);for(let i=0;i<t.length;i++){const l=t[i];var n=`<em>${l.slice(1,-1)}</em>`;e=e.replace(/\*.+?\*/,n)}return e}function _isMainText(e){return!(e.title||e.list||e.blockquote)}function _convertMainText(e){var t=-1,n=e.match(/---.+/);if(null!=n){var i=e.match(/---.+---/);null!=i?(t=0,e=i[0].slice(3,-3)):(t=1,e=n[0].slice(3))}return-1==t?`<p>${e}</p>`:0==t?`<p style='text-align:center;'>${e}</p>`:`<p style='text-align:end;'>${e}</p>`}function _isAlias(e){return e.search(/\\./)>=0}function _convertAlias_first(e){for(const t in _aliases)e=e.replace(RegExp(`\\\\${t}`,"g"),_aliases[t]);return e}function _convertAlias_second(e){for(const t in _aliasesRecover)e=e.replace(RegExp(t,"g"),_aliasesRecover[t]);return e}function _isList(e){return e.search(/[0-9]\.\s\S/)>=0||e.search(/-\s\S/)>=0}function _convertList(e,t,n){var i=-1;null!=e&&(i=e.search(/[0-9]\.\s/)>=0?0:e.search(/-\s/)>=0?1:-1,0==i?e.match(/\s*[0-9]\.\s/)[0].slice(0,-3).length:1==i&&e.match(/\s*-\s/)[0].slice(0,-2).length);var l=-1,c=-1,r="";if(l=t.search(/[0-9]\.\s/)>=0?0:t.search(/-\s/)>=0?1:-1,0==l){c=t.match(/\s*[0-9]\.\s/)[0].slice(0,-3).length;var o=t.match(/\s*[0-9]+\.\s/)[0].length;r=t.slice(o)}else if(1==l){c=t.match(/\s*-\s/)[0].slice(0,-2).length;o=t.match(/\s*-\s/)[0].length;r=t.slice(o)}var s=-1,a=-1;if(null!=n&&(s=n.search(/[0-9]\.\s/)>=0?0:n.search(/-\s/)>=0?1:-1,0==s?a=n.match(/\s*[0-9]\.\s/)[0].slice(0,-3).length:1==s&&(a=n.match(/\s*-\s/)[0].slice(0,-2).length)),null==_mdRuntime.Lists[c]||_mdRuntime.Lists[c]!=l?(0==l?t=`<ol><li>${r}</li>`:1==l&&(t=`<ul><li>${r}</li>`),_mdRuntime.Lists[c]=l):t=`<li>${r}</li>`,-1==s||null!=_mdRuntime.Lists[a]&&_mdRuntime.Lists[a]!=s){var u=[];for(const e in _mdRuntime.Lists){const t=_mdRuntime.Lists[e];0==t?u.push("</ol>"):u.push("</ul>")}t+=u.reverse().join().replace(/,/g,""),_mdRuntime.Lists={}}else c>a&&(0==_mdRuntime.Lists[c]?t+="</ol>":t+="</ul>",_mdRuntime.Lists[c]=void 0);return t}function _isQuote(e){return e.search(/>+\s/)>=0}function _convertQoute(e,t,n){var i=-1;if(null!=e){var l=e.match(/>/g);null!=l&&(i=l.length)}var c=-1,r="";t=t.replace(/\s*>/,">"),c=t.match(/>/g).length,r=t.slice(c+1);var o=-1;if(null!=n){l=n.match(/>/g);null!=l&&(o=l.length)}if(-1==i||i!=c?(t=`<blockquote><p>${r}</p>`,_mdRuntime.QuoteCount++):i==c&&(t=`<p>${r}</p>`),-1==o){for(let e=0;e<_mdRuntime.QuoteCount;e++)t+="</blockquote>";_mdRuntime.QuoteCount=0}return t}function _isSplitLine(e){return null!=e.match(/^-{3,}$/)}function _convertSplitLine(e){return"<hr>"}function _isCodeBlock(e){return null!=e.match(/^```.*$/)}function _convertCodeBlock(e){if(_mdRuntime.InCodeBlock)e="</pre></code>",_mdRuntime.InCodeBlock=!1;else{var t="default";e=e.replace(/\s/g,""),null!=e.match(/^```.+$/)?(_mdRuntime.InCodeBlock=!0,t=e.slice(3),e=`<pre><code style='language-${t}'>`):e="<p>CodeBlock Error: Lack in language type<p>"}return e}function _isLink(e){return null!=e.match(/\[.+\]\(.+\)/)}function _convertLink(e){var t,n,i=e.match(/\[.+?\]\(.+?\)/g);for(const l of i)t=l.match(/\[.+?\]/)[0].slice(1,-1),n=l.match(/\(.+?\)/)[0].slice(1,-1),e=e.replace(/\[.+?\]\(.+?\)/,`<a href='${n}' target='_blank'>${t}</a>`);return e}function _isImg(e){return null!=e.match(/!\[.*\]\(.+\)/)}function _convertImg(e){var t,n,i=e.match(/!\[.*?\]\(.+?\)/g);for(const l of i)t=l.match(/!\[.*?\]/)[0].slice(2,-1),n=l.match(/\(.+?\)/)[0].slice(1,-1),e=e.replace(/!\[.*?\]\(.+?\)/,`<img src='${n}' alt='${t}' title='${t}' >`);return e}function _isLaTexBlock(e){return"$$"==e.replace(/\s/g,"")&&(_mdRuntime.InLaTexBlock=!_mdRuntime.InLaTexBlock,!0)}function _convertLaTexBlock(e){return"$$\n"}function _isInlineLaTex(e){return null!=e.match(/\$.+\$/)}function _convertInlineLaTex(e){return e}function _isInlineCode(e){return null!=e.match(/`.+?`/g)}function _convertInlineCode(e){e=e.replace(/\</g,"&lt;"),e=e.replace(/\>/g,"&gt;");var t=e.match(/`.+?`/g);for(const n of t)e=e.replace(/`.+?`/,`<code>${n.slice(1,-1)}</code>`);return e}let _mdRuntime={TitleIdCount:0,QuoteCount:0,Lists:{},InCodeBlock:!1,InLaTexBlock:!1},_aliases={"<":"&lt;",">":"&gt;","&":"&amp;","\\s":"&nbsp","\\*":"&pwd;"},_aliasesRecover={"&pwd;":"*"};