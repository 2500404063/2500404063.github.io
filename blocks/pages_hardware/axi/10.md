# AXI总线介绍
AXI总线在SoC当中广泛采用，是一种主从模式，高速的总线结构。
## AXI适用性
1. AXI适合高带宽，低延迟的总线。
2. AXI总线满足总线上有许多组件的需求。
3. AXI总线可以向后兼容，兼容AHB和APB总线。
4. AXI具有多样灵活的实现方式，不仅仅就一种。

## AXI特点
1. 分开的地址，控制，数据**阶段**。
2. 支持非对齐的字节数传输。
3. 使用基于burst的数据交换方式，只需要开始地址。
4. 分离的读写通道，可以支持DMA
5. 支持发送多个未完成的地址（有点像以太网通信的数据报一样，要占满通道）
6. 支持非有序数据交换
7. 允许简单地添加一些寄存器，来实现定时关闭（并不理解什么意思）

## AXI结构
AXI是基于burst的数据交换方式，一共具有5个独立的通信通道，分别是
1. 读地址（read address）：信号的变量名以ar开头
2. 读数据（read data）：信号的变量名以r开头
3. 写地址（write address）：信号的变量名以aw开头
4. 写数据（write data）：信号的变量名以w开头
5. 写回应（write response）：信号的变量名以b开头

地址通道来传输控制信息，来描述要传输数据的信息。
主机和从机传输会用到：
1. 写数据通道：数据从主机到从机，从机使用写回应通道来告诉主机写入的完成情况。
2. 读数据通道：数据从从机到主机。

再一次强调：
1. 支持发送多个未完成的地址（有点像以太网通信的数据报一样，要占满通道）
2. 支持非有序数据交换

如下图所示：
![writing_architecture](./pages_hardware/axi/res/writing_architecture.png)

## AXI通道定义
这五个独立的通道都是由一些信息信号，和VALID，READY信号组成，这种方式提供了一种**两种方式**的握手机制。

**信息源(不一定是主机)**使用VALID信号，来指示，在通道当中具有有效的，地址，数据，或者控制信息可以获取。
**信息接收方(不一定是从机)**使用READY信号，来指示，它可以接受信息了。
读数据通道和写数据通道，都具有一个LAST信号，来指示当前数据包是最后一条数据了。
### 读写地址通道
读写事务，都具有自己的读写地址通道，地址通道承载了所有需要的地址信息，控制信息。
### 读数据通道
读数据通道，流通方向是从从机到主机，承载了**数据信息**和**读响应信息**。
包括了以下：
1. 数据总线：可以是8, 16, 32, 64, 128, 256, 512, 1024个bits宽度
2. 读响应信号：指明读事务完成。

### 写数据通道
写数据通道，流通方向是从主机到从机，只承载了数据信号。
1. 数据总线：可以是8, 16, 32, 64, 128, 256, 512, 1024个bits宽度
2. 对于每8个bits，都需要一个字节选通信号，以表明数据当中的一些字节是有效的。

写数据通道的信息总是可以被认为是具有缓冲区的，所以主机可以不必得到**从机对之前的写数据事务的确认**，就可以发起一个写数据事务。

### 写回应通道
从机使用写回应通道来响应主机的写事务。
所有的写事务，都需要从机在写回应通道当中进行应答。
完成信号只有在**一整个写事务**都完成才会发起，并不是每一字节都需要响应。
如下图所示
![writing_architecture](./pages_hardware/axi/res/writing_architecture.png)

### AXI总线接口和互连
AXI的典型连接如图所示：
![interface_interconnect](./pages_hardware/axi/res/interface_interconnect.png)
关于他们之间的连接方式，通常有以下几种拓扑结构:
1. 共享的一个地址总线和一个数据总线，
2. 共享的地址总线，和多个数据总线：这种方式可以发起多个平行的事务。
3. 多个地址总线，多个数据总线

## 一些术语
**通信：**
1. 一个完整的AXI操作，叫做一个事务(Transaction)
2. 一次Transaction，可以有多次Transfer(传输)
3. 任何被传输的有效负载都叫做Burst
4. 一个Burst可以包含多个字节，每个字节叫做Beat

## 参考文献
本文由官方文档翻译而来，笔者翻译水平有限，望谅解。
[1] AMBA_AXI_protocol_spec——ARM