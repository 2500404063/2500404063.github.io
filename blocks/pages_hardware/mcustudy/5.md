# UART(串口)

UART是一种通信方式。

## UART通信原理

以电平高低（一般就0和1两种状态），来进行发送二进制数据。
UART通常有两种模式：8bits模式和9bits模式。
UART每次只能发送一个Byte（8bits）。
UART的数据协议如下：
[0低电平开始位][b0][b1][b2][b3][b4][b5][b6][b7][1高电平停止位]
由1跳变0，作为UART的发送开始标志。
一般是先发送低位，再发送高位。

## 核心概念-比特, 码元, 比特率, 波特率

**比特(bit)：**
就是二进制的最小单位，只有两种状态，要么0，要么1。
**比特率(bits/s)：**
由单位可见，比特率是用来描述比特的传输速率的。
即，每秒能够发送多少个bits.
**码元(Symbol):**
我们将码元拆开理解。
码：就是数据
元：最小单位
则`码元`：数据的最小单位。
将任意类型的数据通信方式进行一个包装，视为**整体**，这个整体即码元。
这就是为什么英文的名称叫"Symbol"，它就仅仅只是个符号。

> 这里举个例子：
> 当按照高低电平（两种状态）进行发送的时候，那么，0，1都**分别**是一个码元，也**分别**是一个bit.
> 当按照不同的振幅，来进行区分0和1，比如：无振幅（00），低振幅（01），中振幅（10），高振幅（11）。
> 那么，00，01，10，11都**分别**是一个码元，也都**分别**是两个bits.

如果对码元理解了，那么上述的例子会更加加深你的印象，如果不理解，再读对码元的概念解释。
简单地说，一个码元，就是任意类型的数据传输方式最小单位。
**波特率(Baud/s, symbol/s)**
那么波特率就好理解了，波特率描述的就是每秒可以传输多少个码元。

## UART的波特率计算

咳，我按照自己的算法和官方的算法相差了四倍，不知道为啥。
问了一些大佬，他们也都不知道，如果有知道的欢迎联系我告诉我。
这个先用官方提供的公式计算吧。

## 使用UART的一些注意点
1. 注意要分别配置TxD和RxD的GPIO模式，TxD需要输出模式，RxD需要输入模式。
2. 记得选择波特率发生Timer，记得检查是不是自己要的Timer
3. 发送和接受中断标志位记得清零。
4. 记得把UART中断和全局中断都打开。