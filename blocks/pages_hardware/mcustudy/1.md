# MCU基本概念

## 一句话说MCU

微控制单元(Microcontroller Unit；MCU)，是把中央处理器(CPU)、内存(memory)、计数器(Timer)、UART、SPI等**功能**集成在一块芯片中的芯片。  

MCU = CPU + Memory + Functions

## 两大计算机结构

**冯·诺依曼结构：**  
CPU，存储器  
**哈佛结构：**  
CPU，代码储存器，数据储存器  

由上可以发现，哈佛结构的代码和数据的储存是分开的，而冯·诺依曼结构是两者混合的。

我们生活中用到的电脑是**冯·诺依曼结构**, 而现在绝大多数的MCU（微控制器）都是基于**哈佛结构**  
为什么要提这两种结构？  
因为了解这个更加有助于去理解MCU的储存方式。 `储存` 是至关重要的。

## 名词理解

### 一、RAM

概念：这些就像是电脑的内存（希望读者是理解内存和磁盘的区别的），就是那种掉电数据就消失，无法保存的储存方式。但是它是一个**可动态快速**更改的空间。所以就适合以下的应用情况。

**程序运行空间(地址空间)：**


> 把RAM当中拿出较多的部分，作为 **程序运行空间**。
> 注意，这不是程序储存空间，后面来讲程序储存空间。

**RAM储存：寄存器(锁存器)(触发器)**

某一些功能的开关（特殊寄存器，看后面），放在特定的位置，那个位置就是它的开关，另一些位置就是储存空间。即，RAM是储存器，有开关功能，由MCU设计决定。

> **通用寄存器**
> **通用寄存器** 是RAM中拿一小部分，当作临时储存一些数据的。就相当于是代码当中的临时变量一样，会经常被更改。也当作一些赋值操作的中间变量。所以这部分的电路设计，其实速度是很快的。


> **特殊寄存器**
> **特殊寄存器** 是RAM当中拿一小部分来当作特殊的空间，这些空间会在刚上电的时候进行初始化成一些值，也就是默认的MCU功能。
> 当我们需要实现某些功能的时候，都是通过修改 **寄存器** 来实现一些功能的开关和配置。这些 **寄存器** 也起着**标志**的作用，可以检测MCU的一些功能的状态。为什么我修改寄存器，就可以开启和关闭一些功能呢？简单理解就是寄存器就是个开关，开关一开，某一种功能打开，一关，某一种功能关闭。多种功能组合起来实现一种功能。这种方式是不需要去检测的，开关一开就运行。

### 二、ROM储存：Flash和EEPROM

Flash：是一种按扇区进行储存的长时间储存芯片。  
EEPROM：是一种按字节进行储存的长时间储存芯片。  
我们的程序一般是存放在Flash里面，并且现在的多数MCU也会提供EEPROM用来记忆程序的配置文件，和一些文本、图片数据。  
程序运行的时候，就是在Flash里面进行读取，然后加载到RAM，在RAM中执行。

接下来，让我们出发！
