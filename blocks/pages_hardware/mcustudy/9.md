# PCA, CCP

PCA(Programmable Counter Array)可编程计数阵列
CCP(Capture, Compare, PWM)捕获，比较，脉宽调制

## PCA

PCA，就是一个计数器（在固定周期下，就是定时器）
只不过PCA，用硬件级实现了以下功能，只需要通过配置寄存器就可以实现，不需要自己写代码模拟。
1. 软件计时模式：就和普通定时器一样，下面的功能其实都是计时器的扩展。
2. (CCP的C)捕获模式：当有引脚外部输入跳变的时候，可以读取此时计数器的值，存入捕获寄存器中（这个寄存器和计数器寄存器的大小一模一样，只是地址不同罢了）。这就叫捕获。。。
3. (CCP的C)高速脉冲输出：当捕获寄存器中的值（可以自己设置，也可以先捕获，来外界让输入值，在切换到高速脉冲输出模式）和计数器的寄存器一模一样的时候，就会对对应的输出引脚进行电平翻转。（就是内置了一个比较器而已）
4. (CCP的P)PWM脉宽调制：这个就是调制脉宽的。

**这些功能都可以通过代码来模拟实现，而且都不难，为什么还要用PCA呢？**
**对，原因就是，这些是硬件级的，是独立于软件的。是不需要去占用软件资源的。**

## PWM

PWM(Pulse Width Modulation)脉冲宽度调制(脉宽调制)

![PWM](./pages_hardware/mcustudy/img/pwm_1.png)

原理其实很简单，就是让一个**周期内**，高低电平通过占比，然后合成出来的结果就是了。
比如，我原来是5V，通过PWM，可以模拟出[0, 5]V的任意电压。
PWM是一种模拟出不同电压的信号，所以，对其他器件的控制，就是通过这个电压大小来控制的。
它还可以模拟出正弦波电压变化信号。

![PWM](./pages_hardware/mcustudy/img/pwm_sin.png)

计算也很简单，就省略了。