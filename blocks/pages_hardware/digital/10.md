# 复杂电路分析
我们中学时期，一直都想着去寻找电流的流向，我依稀记得老师说的一句话“跟着电流走一走”，但是在大学的时候，发现这种方式不再适合了。因为电路的电流方向绝大对数都非常难判断。

所以我们希望有一种新的分析方法来解决这个问题，就是`基尔霍夫定律`，和一些其他的分析方法。

## 复杂电路分析中的概念
1. 支路：不包含分支的电路；特点：电流相等
2. 结点：电路的连结点；
3. 回路：闭合的电路；
4. 网孔：不包含支路的回路；

以后的所有分析都是基于上述四种来做。

## 电源
在分析电路的时候，我们多数用理想电源。
电源类型：
1. 独立电压源
2. 独立电流源
3. 电压控制电流源
4. 电压控制电压源
5. 电流控制电流源
6. 电流控制电压源

看起来很容易，但是因为受到中学的影响，电源的状态成为了一大**思维阻碍**。
### 电压源(独立或控制)
1. 根本特性：其两端电压始终为电压源电压，不受其他元件影响
2. 根据U=IR和电压不变，规定电阻=0
3. 电压源两边是可以有任意电流的！

### 电流源(独立或控制)
1. 根本特性：其支路上的电流始终为电流源电流，不受其他元件影响
2. 根据I=U/R，和电流不变，规定R=无穷大
3. 电流源两边是允许任意电压的！

## 基尔霍夫定律
基尔霍夫定律描述的是电路的`结构特点`，与`元件特性`无关，是一种通用的，底层的电路逻辑。类似于等流分压，等压分流一样通用。

但是在实际运用中，不仅仅是数学符号，应该要代入数值，这时候就需要根据元件的`伏安特性`来决定数值了。
### 电流定律KCL
流进电流的电流 与 流出相同结点的和=0
原因：根据电荷守恒，结点只能汇合电荷，既不能创造，也不能积累。

### 电压定律KVL
对于任意类型的任意一回路，在任意时刻，沿闭合回路绕行一周，各支路的电压代数和等于0.

### 使用注意
#### 参考方向
基尔霍夫定律，使用的第一步就是规定`参考方向`，一切都按照参考方向就一定是正确的。
1. KCL：流入为+，流出为-
2. KVL：一般是让电源数值为+的旋转方向，（正极到负极为+，负极到正极为-）

#### 重复方程和等量代换
为什么会重复呢？
因为基尔霍夫定律是按照元件一个一个来分析的，所以
因为并联是等压的，所以KVL虽然有多条，但是意义是一样的。
因为串联是等流的，所以KCL虽然有多条，但是意义是一样的。
**对于这些等价的，可以进行等量的代换。**

#### 两种方程
在使用基尔霍夫定律的时候，最终是通过一元n次方程来求解，所以就会KCL和KVL其中一种作为主要方程，另一个定律用来代换。
如下题：
![q1](./pages_hardware/digital/res/q1.jpg)
以**电压**为主方程：
$$
\begin{aligned}
& 14-U-I_1=0\\
& I_1-5U-U2=0  
\end{aligned}
$$
以**电流**为主方程：
$$
\begin{aligned}
& I_3 = 5U = 5*2*I_2\\
& I1=I_3+I_2\\
& 14=I_1 + 2*I_2
\end{aligned}
$$

## 电路分析方法
### 等效变换
等效变换的核心思想是，**对外部电路来说**，使得`伏安特性`和功率保持不变的电路结构化简。
等效变换由以下几种：
1. 整体思想
   1. 广义电阻化简
   2. 电源化简
2. 计算等效
   1. 例如电桥Y和电桥▲等效：通过计算一部分电路的输入输出特性来得到等效电阻（在模拟电路当中很多）
   2. 模电中用等效电阻代替非线性元件(例如二极管）（当伏安特性差距不大时可以代替）

### 电桥Y和▲等效变换
推导过程不做解释了，原理就是把Y形结构和▲形结构单独拿出来，建立KCL和KVL方程，求出内部参数使得让他们的输入输出相同，从而等效代替。
$R_{▲n}=\frac{\Sigma (Y形电阻两两乘积)}{Y中与▲不相邻电阻}$
$R_{Yn}=\frac{\Sigma (▲相邻电阻乘积)}{▲中电阻之和}$
用以下图式求解更容易记忆一些：
![bridge1](./pages_hardware/digital/res/bridge1.jpg)
![bridge2](./pages_hardware/digital/res/bridge2.jpg)

### 无源二端（一端口）等效
无源：元件内部无独立电源
电路中的一部分电路可以被当作一个整体（网面）（或者就是被封装成了一个芯片），其输入输出的电压电流，依然满足基尔霍夫定律。
这个对于理解芯片封装很有帮助。

一个线性的无源二端元件可以用一个电阻代替，对于非线性的可以根据伏安特性近似。

### 电源的等效
#### 理想电压源/电流源
1. 电压源
   1. 串联：电场叠加，等效为$\Sigma u_n$
   2. 并联：只允许大小，极性完全相同的电压源并联，电压即单个的电压
2. 电流源
   1. 串联：只允许大小，极性完全相同的电流源串联，电压即单个的电流
   2. 并联：电流叠加，等效为$\Sigma i_n$
3. 电压源和电流源等效替换
   1. 电压源串联一个电阻，可以等效为一个电流源并联一个电阻。原因就是欧姆定律。

#### 实际电压源/实际电流源
实际电压源：理想电压源，串联一个电阻
实际电流源：理想电流源，并联一个电阻
**其满足线性伏安特性**
$U=E-iR$

### 电路分析总结
#### 电路结构是第一
电路分析的第一步应该是去**分析电路的串联并联结构**，明确各个元件的连接方式。
有了电路结构，就可以利用**基尔霍夫定律**，再进行其他方面的分析。

## 支路电流法
其实我们在学了KCL和KVL后已经用了这个方法了，这里再作具体解释。
支路电流法，就是通过分析，来列出**独立方程**(不重复方程)

那么到底有多少条独立方程呢？
对于n个结点，b条支路的电路：
KCL：$n-1$
KVL：$b-(n-1)=b-n+1$
通过这个，可以进行**检验**方程的重复性。
**判断方程是否重复，我推荐以下方法：**
**KCL方程重复原因：**两个结点**仅用了一条支路相连**。
**KVL方程重复原因：**两条支路是并联关系。
在列方程的时候，只需要注意两点：
1. 包含所求未知量
2. 根据方程重复原因，不要列重复方程即可

**对于含电流源的支路：**
1. 受控源：带入受控源的变量来计算
2. 选择其他等效（等流或者等压）的回路来建立方程

## 网孔电流法/回路电流法
这个就很有意思了，把电流（KCL），按照分析电压（KVL）的方式分析。
把支路上的电流，**看成**一个回路上的电流，然后回路之间的电流会进行**电流叠加**。
需要注意的是，和KVL一样，**需要假定电流方向**。
> 其本质思想是，先不进行分流，而是**保留回路分流之前的结果**，直接代入计算，然后**再进行叠加**。
网孔电流法和回路电流法是类似的，
区别在于，回路电流法的概念定在回路，而网孔电流法定义在网孔，网孔也是一种回路。
回路电流法可以看作是网孔电流法的推广。

**回路电流法方程重复的原因：**是同一个回路，新的回路没有新的支路，不会产生分流。

那么列出的KCL的**独立方程数量**和KVL相同：
KCL：$b-(n-1)=b-n+1$
与支路电流法，方程数减少了n-1个

> 对于回路电流法有一个更好的方法来**寻找独立方程**：
> 回路电流参考了几个回路，那么回路电压就需要几个回路，且都是一样的回路。

## 结点电压法
结点电压：两个结点之间的电压
首先确定结点，列出这些结点的KCL。
用结点电压代替KCL当中的电流。

## 非闭合电路没有电流
电压提供了一个电场，当电路没有闭合的时候，是有电压，但是没有电流的。
所以不要怀疑为什么会没有电流，**因为电路没有闭合**。
所以可以通过这种方式，在外部增加一个电压源，但是没有形成闭合回路，以增加电位。
**原理就是电场叠加**

## 分析规范
1. KCL和KVL方程一般都是线性方程，可以使用n阶行列式来进行求解。
2. 电压源的电压方向必须已知，除非给了电流方向条件，以来求电压方向。
3. 用电器和电流源的电压方向由电流决定
4. 根据题目求解要求，分析求解方法：例如求功率就是求电压和电流
5. 使用基尔霍夫定律前要分析结构特点：支路(分析串联和并联关系)，回路(分析是否闭合)，网孔(分析电压分压情况)
6. 推荐写KVL方程时，从电源正极到电源负极方向进行写：这样电源电压为正，采用E=U1+U2，这样就无需思考正负，减少思考过程。

## 思想总结

### KCL，KVL
KCL，KVL用来描述电路结构关系，脱离电气特性的影响。

### 理想恒源
作为抵消外部的影响，不受外部电路的影响的电压/电流输出。
而，可控是理想源的可变源，其输出只由控制表达式决定。

### 支路电流法
从电路的最终结果看过去，假设每一条支路的电流，列**约束方程**。
约束方程：**各支路，各回路之间**的相互影响关系（即KCL和KVL）
必须先假设电流流向，否则无法列KVL方程。

### 回路电流法
从电路的未平衡状态看去，以I（电流）作为未知量，代替U（电压），列**约束方程**。
因为现在**只有电流量**，无电压量，且方程是**KVL方程**，所以**只需要考虑电压约束**。
约束方程：各回路之间的电压叠加情况。直到所有的约束条件都列出，状态确定下来才能求解出结果。
理想电压源：在KVL方程中，作为**常量电压**
理想电流源：在KVL方程中，作为**已知电流**，这样就少了一个未知数
受控源：找到受控源的表达式，用其他未知量代替。
适用：回路比较少的情况
**切记：**回路电流法的未知量是**未平衡状态(未分流前)**的电流，用于后来的叠加，以达平衡。

**分析逻辑及方程规范**
KVL方程核心思想：
1. 沿着闭合回路**所有元件两端的平衡态电压**的代数和等于零（方向不变即可，与真实情况无关）
2. 沿着闭合回路的**所有平衡态电动势**的代数和等于**所有平衡态电压降**的代数和
正数原因：电流流经该用电器
负数原因：电流被分流（注意！未平衡状态的电流是未分流之前的）
所以：哪里分流了，哪里就需要一个回路电流未知数

> 回路电流法具有局限性
> 对于回路当中的


### 结点电压法
从电路的未平衡状态看去，以U（电压）作为未知量，代替I（电流），列**约束方程**。
因为现在**只有电压量**，无电压量，且方程是**KCL方程**，所以**只需要考虑电流约束**。
约束方程：各回路之间的电流叠加和分流情况。直到所有的约束条件都列出，状态确定下来才能求解出结果。
理想电压源：在KCL方程中，作为**已知电压**，这样就少了一个未知数。
理想电流源：在KCL方程中，作为**常量电流**。
**切记：**结点电压法的未知量是**平衡状态**的电压，通过电压来计算电流，列KCL。
受控源：找到受控源的表达式，用其他未知量代替。
适用：结点比较少的情况

**分析逻辑及方程规范**
在进行结点电压分析之前，**必须假设各个支路的电流方向**，否则电压方向会相反。
KCL方程思想：
1. 流入结点的电流=流出结点的电流