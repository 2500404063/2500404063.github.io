# SPI通信

## 简介
SPI是串行外设接口（Serial Peripheral Interface）的缩写，是一种高速的，**全双工**，**同步**的通信总线，并且在芯片的管脚上只占用四根线，节约了芯片的管脚，同时为PCB的布局上节省空间，提供方便，因其硬件功能很强，所以与SPI有关的软件就相当简单，使CPU有更多的时间处理其他事务，正是出于这种简单易用的特性，越来越多的芯片集成了这种通信协议。

通常由一个主模块和一个或多个从模块组成，主模块选择一个从模块进行同步通信，从而完成数据的交换。
SPI是一个环形结构，通信时需要至少4根线（事实上在单向传输时3根线也可以）

## 通信介绍
SPI的通信原理很简单，它以主从方式工作，这种模式通常有一个主设备和一个或多个从设备，需要至少4根线，事实上3根也可以（单向传输时）。
所有基于SPI的设备共有的口有，MISO（主设备数据输入）、MOSI（主设备数据输出）、SCLK（时钟）、CS（片选）。

1. MISO：Master Input Slave Output，主设备数据输入，从设备数据输出；
2. MOSI：Master Output Slave Input，主设备数据输出，从设备数据输入；
3. SCLK：Serial Clock，时钟信号，由主设备产生；
4. CS：Chip Select，从设备使能信号，由主设备控制。

其中，CS是从芯片**是否被主芯片选中的控制信号**，也就是说只有片选信号为预先规定的使能信号时（高电位或低电位），主芯片对此从芯片的操作才有效。这就使在同一条总线上连接多个SPI设备成为可能。

SPI接口的一个缺点：没有指定的流控制，没有应答机制确认是否接收到数据。