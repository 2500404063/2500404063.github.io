# Verilog规范

## 代码规范
### 变量命名
1. Parameter 用全大写和下划线区分
2. 其他均用小写和下划线

尾缀
1. _d 可以表示延迟后的信号
2. _t 可以表示暂时存储的信号
3. _n 可以表示低有效的信号，默认都是高电平有效
4. _s 可以表示 slave 信号
5. _m 可以表示 master 信号等

### 注释
文件开头应该包含 版权、模块名字、作者、日期、梗概、修改记录等信息
```text
/**********************************************************
// Copyright 1891.06.02-2017.07.14
// Contact with willrious@sina.com
================ runoob.v ======================
>> Author       : willrious
>> Date         : 1995.09.07
>> Description  : Welcome
>> Notes        : (1)To 
>>              : (2)My
>> V1.0         : World.
>> V1.1         : World.
************************************************************/
```

信号图：
```text
            ________
CH1:_______/        \_____________________
            ________     ________
CH2:_______/        \___/        \________
```

### 模块实例化规范
```verilog
//无参
Gowin_DQCE MyDQCE(
    .clkin(clkin), //input clkin
    .clkout(clkout), //output clkout
    .ce(ce) //input ce
);

//含参
OSC #(
    .FREQ_DIV(10),
    .DEVICE("GW1NR-9C")
) MyOSC (
    .OSCOUT(oscclk)
);
```
模块实例化采用如上格式，易读，风格统一，且好看。

## 避免Latch
锁存器（Latch）是电平触发，触发器（FF）是边沿触发，所以为了避免锁存器的空翻，导致后面的电路不稳定，所以要避免锁存器。
一下情况下会产生Latch：
1. if：在真和假的情况下，有未确定的值
2. case：未完整描述所有的case情况
3. 读取又写入：c=c，或者 (c) ? : 1'b0 : 1'b1;

解决方法：
1. if：给初值，或者if else写完整
2. case：写完整所有情况，或者使用default
3. 读取又写入：不要自身参与判断

### 产生Latch的原因
我们知道Latch是组合逻辑电路，是没有时钟控制的，而FF是由时钟控制的，所以产生Latch的原因也就是这个。
但是可以通过指明时钟来强制使用FF来实现（用always @(posedge clk)来限定）。

其次，在组合组合逻辑电路里面，有很多的基本电路，例如：编码器，加法器，这些是已经是封装好的，作为一个独立器件，
然而当我们用HDL描述的功能，并不能依靠这些封装好的器件来实现，而需要以更加底层的方式（也就是用逻辑门和锁存器）来实现的时候就会出现锁存器。
相当于重新用逻辑门和锁存器写了一个编码器。

总结：当我们用HDL描述的功能，符合
1. 可以用组合逻辑电路实现（尽管也可以用时序电路实现）
2. 现有的组合逻辑器件不能实现，而需要以更加底层的方式来实现。

就会产生Latch，但是可以通过指明触发方式来使用FF实现。